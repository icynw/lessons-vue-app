import{o as r,c as a,F as _,r as g,a as e,n as x,t as h,b as p,p as C,d as w,w as P,e as f,v as k,f as I,g as b,h as y,i as N,j as $}from"./vendor.2313f1c5.js";const V=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function c(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=c(o);fetch(o.href,n)}};V();var v=(t,s)=>{const c=t.__vccOpts||t;for(const[i,o]of s)c[i]=o;return c};const A={props:{lessons:Array},methods:{handleAddItemToCart(t){this.$emit("add-item-to-cart",t)},getProdImageURL(t){return"https://lessons-app-assignment.herokuapp.com"+t}}},L=t=>(C("data-v-252f0ace"),t=t(),w(),t),B={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"},T={class:"card shadow-sm"},j=["src"],O={class:"card-body"},z={class:"card-title"},U={class:"card-text mt-2"},M={class:"font-weight-bold float-left"},R=L(()=>e("br",null,null,-1)),E={key:0,class:"badge badge-pill badge-primary"},F=["disabled","onClick"],D=L(()=>e("i",{class:"fas fa-cart-plus fa-2x green"},null,-1)),Z=[D];function q(t,s,c,i,o,n){return r(),a("div",B,[(r(!0),a(_,null,g(c.lessons,l=>(r(),a("div",{class:"col-12 col-sm-6 col-md-6",style:{"margin-bottom":"40px"},key:l.id},[e("div",T,[e("img",{class:"card-img-top prod-img",src:n.getProdImageURL(l.image),alt:"Image"},null,8,j),e("div",O,[e("i",{class:x(`my-icon fa ${l.icon}`)},null,2),e("h4",null,h(l.subject),1),e("h6",z,"Location: "+h(l.location),1),e("div",U,[e("span",M,[e("span",null,"$"+h(l.price),1),R,l.space>0?(r(),a("span",E,h(l.space)+" Spaces ",1)):p("",!0)]),e("button",{disabled:l.space==0,class:"btn mt-2 btn-sm float-right text-uppercase",onClick:m=>n.handleAddItemToCart(l)},Z,8,F)])])])]))),128))])}var G=v(A,[["render",q],["__scopeId","data-v-252f0ace"]]);const H={props:{showCart:Boolean,cartItems:Array},data(){return{doCheckout:!1,checkoutName:"",checkoutPhone:"",isValidName:!1,isValidPhone:!1}},methods:{removeItem(t){this.$emit("remove-item",t.id)},checkName(){this.isValidName=!!/^[a-zA-Z]+$/.test(this.checkoutName)},checkPhone(){this.isValidPhone=!!/^[0-9]+$/.test(this.checkoutPhone)},onCheckout(){this.$emit("on-checkout")},onToggleShowCart(){this.$emit("toggle-showcart")},getProdImageURL(t){return"https://lessons-app-assignment.herokuapp.com"+t}}},u=t=>(C("data-v-23c12bd4"),t=t(),w(),t),K={class:"cart col-12"},J=u(()=>e("i",{class:"fa fa-chevron-left"},null,-1)),Q=I(" Back "),W=[J,Q],X={class:"font-weight-bold mt-3"},Y={class:"table table-bordered"},ee=u(()=>e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Image"),e("th",null,"Subject"),e("th",null,"Location"),e("th",null,"Price"),e("th",null,"Action")])],-1)),se={scope:"row"},te=["src"],oe=["onClick"],le=u(()=>e("i",{class:"fa fa-trash"},null,-1)),ne=[le],ce={class:"card-action"},re={key:0,class:"card-text row"},ae=u(()=>e("h2",{class:"font-weight-bold mt-4"},"Checkout",-1)),ie={class:"form-group"},de=u(()=>e("label",null,"Name",-1)),he={class:"form-group"},ue=u(()=>e("label",null,"Phone",-1));function me(t,s,c,i,o,n){return r(),a("div",K,[e("div",null,[e("div",null,[e("div",null,[e("div",null,[e("button",{class:"btn mr-2 btn-primary",onClick:s[0]||(s[0]=(...l)=>n.onToggleShowCart&&n.onToggleShowCart(...l))},W),e("h2",X," Cart - "+h(c.cartItems.length)+" items ",1)]),e("table",Y,[ee,e("tbody",null,[(r(!0),a(_,null,g(c.cartItems,(l,m)=>(r(),a("tr",{key:m},[e("td",se,h(m+1),1),e("td",null,[e("img",{class:"mr-3 prod-img",width:"72px",height:"72px",src:n.getProdImageURL(l.image),alt:"Generic placeholder image"},null,8,te)]),e("td",null,h(l.subject),1),e("td",null,h(l.location),1),e("td",null,"$"+h(l.price),1),e("td",null,[e("button",{style:{"max-height":"42px !important"},class:"btn text-danger",onClick:d=>n.removeItem(l)},ne,8,oe)])]))),128))])])])]),e("div",ce,[e("a",{class:"btn",style:{background:"#4ec690",color:"white"},href:"#checkout",onClick:s[1]||(s[1]=l=>o.doCheckout=!0)}," Proceed to checkout ")]),o.doCheckout?(r(),a("div",re,[e("form",{onSubmit:s[7]||(s[7]=P((...l)=>t.checkout&&t.checkout(...l),["prevent"])),class:"col-12 col-sm-8",id:"checkout"},[ae,e("div",ie,[de,f(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=l=>o.checkoutName=l),onInput:s[3]||(s[3]=(...l)=>n.checkName&&n.checkName(...l)),class:"form-control",placeholder:"Enter name"},null,544),[[k,o.checkoutName]])]),e("div",he,[ue,f(e("input",{type:"number","onUpdate:modelValue":s[4]||(s[4]=l=>o.checkoutPhone=l),onInput:s[5]||(s[5]=(...l)=>n.checkPhone&&n.checkPhone(...l)),class:"form-control",placeholder:"Enter phone"},null,544),[[k,o.checkoutPhone]])]),o.isValidName&&o.isValidPhone?(r(),a("button",{key:0,class:"btn bg-primary",onClick:s[6]||(s[6]=(...l)=>n.onCheckout&&n.onCheckout(...l))}," Checkout ")):p("",!0)],32)])):p("",!0)])])}var _e=v(H,[["render",me],["__scopeId","data-v-23c12bd4"]]);const pe={components:{lessons:G,checkout:_e},data(){return{lessons:[],showCart:!1,cartItems:[],doCheckout:!1,checkoutName:"",checkoutPhone:"",isValidName:!1,isValidPhone:!1,orderPlaced:!1,parameters:["subject","location","price","availability"],sortBy:"",filteredLessons:[]}},mounted(){fetch("https://lessons-app-assignment.herokuapp.com/lessons").then(t=>t.json()).then(t=>{const s=t.lessons;this.lessons=s,this.filteredLessons=s,console.log("data: ",s)})},methods:{addItemToCart(t){var s;if(t.space>0){let c=this.lessons.findIndex(i=>i.id==t.id);((s=this.lessons[c])==null?void 0:s.space)>0&&(this.cartItems.push(t),this.lessons[c].space=this.lessons[c].space-1,this.lessons[c].space==0?this.lessons[c].availability=0:this.lessons[c].availability=1)}},checkName(){this.isValidName=!!/^[a-zA-Z]+$/.test(this.checkoutName)},checkPhone(){this.isValidPhone=!!/^[0-9]+$/.test(this.checkoutPhone)},onCheckout(){this.cartItems=[],this.orderPlaced=!0,this.doCheckout=!1},sortLessons(t){t=="desc"?this.filteredLessons.sort((s,c)=>s[this.sortBy]<c[this.sortBy]?1:-1):this.filteredLessons.sort((s,c)=>s[this.sortBy]>c[this.sortBy]?1:-1)},searchItem(t){this.filteredLessons=this.lessons.filter(s=>s.subject.toString().toLowerCase().includes(t.target.value)||s.location.toString().toLowerCase().includes(t.target.value)||s.subject.toString().includes(t.target.value)||s.location.toString().includes(t.target.value)),this.filteredLessons=this.filteredLessons.filter(s=>Object.values(s).filter(c=>c.toString().toLowerCase().includes(t.target.value)))},removeItem(t){console.log(t);let s=this.lessons.findIndex(i=>i.id===t),c=this.cartItems.findIndex(i=>i.id===t);this.cartItems.splice(c,1),this.lessons[s].space=this.lessons[s].space+1,this.lessons[s].availability=1,this.cartItems.length==0&&(this.showCart=!1)},toggleShowCart(){this.showCart=!this.showCart}}},fe=e("div",{class:"collapse bg-dark",id:"navbarHeader"},[e("div",{class:"container"})],-1),ge={class:"navbar navbar-dark bg-dark shadow-sm"},ve={class:"container"},ke=e("a",{href:"#",class:"navbar-brand align-items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","aria-hidden":"true",viewBox:"0 0 24 24"},[e("path",{d:"M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"})]),e("strong",null,"Lessons")],-1),be=e("i",{class:"fas fa-shopping-cart",style:{color:"white"}},null,-1),ye={class:"badge badge-primary badge-pill",style:{position:"absolute",top:"2px","border-radius":"50%",background:"#4ec690"}},Ce={class:"album py-5 bg-light"},we={class:"container"},Ie={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},Le=e("strong",null,"Success",-1),Se=I(" Order placed successifully "),xe=e("span",{"aria-hidden":"true"},"\xD7",-1),Pe=[xe],Ne={key:1},$e={key:2},Ve={class:"card mb-5"},Ae=e("h5",{class:"card-header bg-dark text-light"},"Sort & Filter",-1),Be={class:"card-body"},Te={class:"form-group row"},je={class:"col-md-4"},Oe={class:"input-group mb-3 mr-sm-4"},ze=e("div",{class:"input-group-append"},[e("span",{style:{background:"#4ec690",color:"white"},class:"fa fa-search input-group-text pt-2"})],-1),Ue={class:"col-4"},Me=e("option",{value:""},"Select Sort Option",-1),Re=["value"],Ee={class:"col-4 px-1"},Fe=e("i",{class:"fa fa-chevron-circle-up"},null,-1),De=[Fe],Ze=e("i",{class:"fa fa-chevron-circle-down"},null,-1),qe=[Ze];function Ge(t,s,c,i,o,n){const l=b("checkout"),m=b("lessons");return r(),a(_,null,[e("header",null,[fe,e("div",ge,[e("div",ve,[ke,e("span",{class:"float-right btn-lg",onClick:s[0]||(s[0]=d=>o.showCart=!o.showCart)},[be,e("span",ye,h(o.cartItems.length),1)])])])]),e("main",null,[e("div",Ce,[e("div",we,[o.orderPlaced?(r(),a("div",Ie,[Le,Se,e("button",{type:"button",class:"close","data-dismiss":"alert","aria-label":"Close",onClick:s[1]||(s[1]=d=>o.orderPlaced=!1)},Pe)])):p("",!0),o.showCart&&o.cartItems.length>0?(r(),a("div",Ne,[y(l,{showCart:o.showCart,cartItems:o.cartItems,onRemoveItem:n.removeItem,onOnCheckout:n.onCheckout,onToggleShowcart:n.toggleShowCart},null,8,["showCart","cartItems","onRemoveItem","onOnCheckout","onToggleShowcart"])])):(r(),a("div",$e,[e("div",Ve,[Ae,e("div",Be,[e("div",Te,[e("div",je,[e("div",Oe,[e("input",{type:"search",onInput:s[2]||(s[2]=d=>n.searchItem(d)),class:"form-control",placeholder:"Search lesson...","aria-label":"Search lesson..."},null,32),ze])]),e("div",Ue,[f(e("select",{type:"search","aria-placeholder":"Sort By","onUpdate:modelValue":s[3]||(s[3]=d=>o.sortBy=d),onChange:s[4]||(s[4]=d=>n.sortLessons("desc")),class:"form-control"},[Me,(r(!0),a(_,null,g(o.parameters,(d,S)=>(r(),a("option",{key:S,value:d,class:"text-capitalize"},h(d),9,Re))),128))],544),[[N,o.sortBy]])]),e("div",Ee,[e("button",{class:"btn btn-link",style:{color:"white",background:"#4ec690"},onClick:s[5]||(s[5]=d=>n.sortLessons("asc"))},De),e("button",{class:"btn btn-link",style:{color:"white",background:"#4ec690"},onClick:s[6]||(s[6]=d=>n.sortLessons("desc"))},qe)])])])]),y(m,{lessons:o.filteredLessons,onAddItemToCart:n.addItemToCart},null,8,["lessons","onAddItemToCart"])]))])])])],64)}var He=v(pe,[["render",Ge]]);$(He).mount("#app");
